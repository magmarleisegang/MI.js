function GetUserMappingSettings(){addToCrumbtrail("GetUserMappingSettings()"),DoAjax({url:"/MappingWebService.asmx/GetUserMappingSettings",data:'{"syncedDevice": null}',doAsync:!1,successCallback:function(n){if(UserMappingSettings=n.d,UserMappingSettings.AllowTripCategorization===!0){var t=UserMappingSettings.Categories;t.unshift({iCategoryId:0,sCategory:"None",sColourHex:"transparent"}),t.push({iCategoryId:-99,sCategory:"Edit",sColourHex:"transparent"}),pCategoryPopup=new popupMenu(t,{div:"#pluginCategory",drawRow:drawCategoryRow,cssClass:"categoryPopupTable",callbackOnBlur:!0})}distanceUnit=UserMappingSettings.SiteDistanceUnit}})}function GetZones(){addToCrumbtrail("GetZones()");var n='{"iPageNr": '+iPageNumber+', "iZonesPerPage": '+iZonesPerPage+"}";DoAjax({url:"/MappingWebService.asmx/GetZones",data:n,successCallback:function(n){if(n.d.length===0&&iPageNumber==1){$("#trNoResultsFound").show(),$("#tfrLoading").css("display","none");return}n.d.length>=iZonesPerPage==!1&&$("#tfrLoading").css("display","none"),g_Zones.pushRange(n.d),iZonesPerPage===0?LoadZoneTable():ExtendZoneTable(n.d.length>=iZonesPerPage)},errorCallback:function(n,t){alert(t),$("#trNoResultsFound").show(),$("#tfrLoading").css("display","none")}})}function LoadZoneTable(){for(var r=g_Zones.length,t=[],i,n=0;n<r;++n)i=g_Zones[n],t[n]=i.ToTableString();$("#tableZones").append("<tbody>"+t.join(" ")+"<\/tbody>")}function ExtendZoneTable(n){for(var i=[],r=NewMax(),u,t=iCurrentMaxRecord;t<r;++t)u=g_Zones[t],i[t]=u.ToTableString();$("#theBody").append(i.join(" ")),n&&(iCurrentMaxRecord=r,iPageNumber+=1,GetZones())}function NewMax(){var n=g_Zones.length,t=iCurrentMaxRecord+iZonesPerPage;return t<n?t:n}function SaveSuccessCallback1(n){var t=g_Zones.GetZone(n.d[0]),r=$("#thCategory").length,i=0;$("#"+t.Id+" > td").each(function(){if(r==1&&i===0)$(this).children("div.cat").data("c",t.CategoryId).empty().append(GetCategoryDiv(t.CategoryId,!1));else if(i===r+0)$(this).text(t.Name);else if(i==r+1)t.Designation==2||t.Designation==4?$("#Designation"+t.Id).attr({src:URL.BUSINESS,title:"Business. Click to change to Private"}):(t.Designation==1||t.Designation==3)&&$("#Designation"+t.Id).attr({src:URL.PRIVATE,title:"Private. Click to change to Business"});else if(i==r+2)t.Comment!=null?$(this).text(t.Comment):$(this).text("");else return!1;i++})}function SaveErrorCallback1(n,t){alert(t)}function slider_slide(n,t){ZonePopup.slider_slide(n,t)}function ToggleDesignation(n,t){var r,u,i=g_Zones.GetZone(t),f=n.alt;f=f.split(".")[0],i.Designation==1||i.Designation==3?(r="Business",u=URL.BUSINESS,i.Designation=4):(i.Designation==2||i.Designation==4)&&(r="Private",u=URL.PRIVATE,i.Designation=3),n.src=u,n.alt=r,n.title=r+". Click to change to "+f,g_Zones.setSelected(i),g_Zones.SelectedZone.Save(SaveSuccessCallback1,SaveErrorCallback1)}function ViewClick(n){g_fPreloadMaps==!1&&g_fGoogleApiLoaded==!1&&(document.body.style.cursor="wait",LoadGoogleApi()),g_fPopupOpen===!1&&(g_Zones.setSelected(n),ZonePopup.LoadDiv(g_Zones.SelectedZone),g_fPopupOpen=!0)}function Delete(n){confirmUI("Do you want to delete this zone?",!0,function(t){if(t==!0){var i="{'zoneId':"+n+"}";DoAjax({url:"/MappingWebService.asmx/DeleteZoneById",data:i,successCallback:function(t){if(t.d==-1){alert("There was an error in the webservice and the zone was not deleted.");return}g_Zones.GetZone(n)!=null&&($("#"+n).remove(),g_Zones.Delete(n)),$("#tableZones tbody tr").length==0&&$("#trNoResultsFound").show()},errorCallback:function(n,t){alert(t)}})}return!0})}function CenterPopup(){var n,u,t,f,r,i,e;addToCrumbtrail("CenterPopups()"),n={height:$(window).height(),width:$(window).width()},u=0,$(".popupBackground").height(n.height-u).width(n.width-u),t={width:0,height:0},t.width==0&&(t.width=n.width-parseInt($(".popupWindow").css("margin-left").replace(/\D/g,""))-parseInt($(".popupWindow").css("margin-right").replace(/\D/g,""))),t.height==0&&(t.height=n.height-parseInt($(".popupWindow").css("margin-top").replace(/\D/g,""))-parseInt($(".popupWindow").css("margin-bottom").replace(/\D/g,""))),f=t.width-(20+$(".popupDetails").width()+parseInt($(".popupWindow").css("padding-left").replace(/\D/g,""))+parseInt($(".popupWindow").css("padding-right").replace(/\D/g,""))),r=t.height-(24+parseInt($(".popupWindow").css("padding-bottom").replace(/\D/g,""))),$(".mapCover").each(function(n,t){$(t).width(f).height(r),$(t).children().css("margin-top",(r-91)/2)}),$(".map").each(function(n,t){$(t).width(f).height(r)}),i=$("div.blockPage"),i.length>0&&(e={height:i.height(),width:i.width()},i.css("left",(n.width-e.width)/2+"px").css("top",(n.height-e.height)/2+"px"))}function LoadGoogleApi(){$(document).css("cursor","wait");var n;$.ajax({type:"POST",url:"../MappingWebService.asmx/GetGoogleUrl",contentType:"application/json; charset=utf-8",data:{},dataType:"json",success:function(t){n=t.d,$.getScript(n+"&callback=MapApiLoaded",function(){})},async:!1})}function MapApiLoaded(){$.getScript(sScriptToLoad,function(){g_fGoogleApiLoaded=!0})}function WaitLoaded(n){n!=undefined&&typeof n=="function"&&(m_scriptLoaded=n),g_fGoogleApiLoaded===!0&&ScriptLoadComplete===!0?(document.body.style.cursor="default",m_scriptLoaded()):setTimeout(WaitLoaded,100)}function drawCategoryRow(n,t){var i="",r;return t!=null&&n.iCategoryId>0&&(r=n.iCategoryId.toString(2).length-1,t[t.length-1-r]==1&&(i="class='checked'")),["<td data-id='",n.iCategoryId,"'><div ",i," style='background-color:",n.sColourHex,n.sColourHex=="transparent"?";color:#505050":"",";'>",n.sCategory,"<\/div><\/td>"].join("")}function EditCategories(){var r,i,t,n;for($("#divCategories div.category").length>0&&$("#divCategories").empty(),r=UserMappingSettings.Categories.length,i=[],t=0;t<r;t++)n=UserMappingSettings.Categories[t],n.iCategoryId!=0&&n.iCategoryId!=-99&&i.push('<div id="ec'+n.iCategoryId+'" class="category"><div class="category-color" style="background-color: '+n.sColourHex+'"><\/div><div class="category-label"><input type="text" value="'+(n.sCategory==null?"":n.sCategory)+'"/><\/div><\/div>');$("#divCategories").append(i.join("")),$.blockUI({message:$("#divCatEdit"),css:{width:270,borderRadius:8,borderWidth:1}}),$.blockUI.windowCenter()}var m_SelectedZone,g_Zones,pCategoryPopup,zoneCommentLength=440,iPageNumber,iZonesPerPage=10,iCurrentMaxRecord,g_fPopupOpen,g_fGoogleApiLoaded=!1,UserMappingSettings,m_scriptLoaded;$(document).ready(function(){ViewingDriverProfile=function(){return!1},iPageNumber=1,iCurrentMaxRecord=0,g_fAllowTrackingZones=$("#trTrackingZones").length>0,g_Zones=new Zones,$("#divAddZone").hide(),$("#btnSaveNewZone").hide(),$("#slider").slider({min:Format.SliderMin(),max:Format.SliderMax(),step:10,slide:slider_slide}),$("#sliderMax").text(Format.SliderMaxDisplay()),$("#sliderMin").text(Format.SliderMinDisplay()),$(window).resize(CenterPopup),CenterPopup(),g_fPopupOpen=!1,GetUserMappingSettings(),GetZones(),g_fPreloadMaps===!0&&LoadGoogleApi(),$("#thCategory").length==0&&$("#trZoneCategory").hide()}),$("#btnAdd").mousedown(function(){g_fPreloadMaps==!1&&g_fGoogleApiLoaded==!1&&LoadGoogleApi(),g_fPopupOpen===!1&&($("#divZoneDetails").show(),$("#divAddZone").show(),ZonePopup.LoadDiv(null),g_fPopupOpen=!0)}),$("#tableZones").mousedown(function(n){var t,i,f,r,u;for(n.preventDefault(),t=n.target,i=t.parentNode;i.nodeName!="TR";)i.nodeName=="TD"&&(f=i.cellIndex),i=i.parentNode;if(r=i.id,t.nodeName=="IMG")t.alt==undefined&&alert(n),ToggleDesignation(t,r);else if(t.nodeName=="A"){u=$(t).attr("href");switch(u){case"e":ViewClick(r);break;case"d":Delete(r)}}}),$("div#divCatEdit a").live("click",function(n){var i,r,t;(n.preventDefault(),UserMappingSettings.AllowTripCategorization!==!1)&&(i=$(this).attr("href"),i=="cancel"?($.unblockUI(),pCategoryPopup.focus()):i=="done"&&(r=$("div.category"),t=[],$.each(r,function(n,i){var u=parseInt(i.id.replace(/[^\d-]/g,"")),r=$("#"+i.id+" input").val().replace(/^[ ]{0,}/,"").replace(/[ ]{0,}$/,"");r.length==0&&(r=null);var f=$("#"+i.id+" div.category-color").css("background-color"),e={iCategoryId:u,sCategory:r,sColourHex:f},o=GetCategory(u).sCategory;o!=r&&t.push(e)}),t.length>0?DoAjax({url:"/MappingWebService.asmx/EditCategories",data:JSON.stringify({cats:t}),successCallback:function(n){n.d[0]==!0?(n.d[1].unshift({iCategoryId:0,sCategory:"None",sColourHex:"transparent"}),n.d[1].push({iCategoryId:-99,sCategory:"Edit",sColourHex:"transparent"}),pCategoryPopup.setDatasource(n.d[1]),UserMappingSettings.Categories=n.d[1],$.each(t,function(n,t){$("table.categoryPopupTable tr td#"+t.iCategoryId+" div").text(t.sCategory)}),pCategoryPopup.close(),$.unblockUI()):alert(n.d[1])},errorCallback:function(n,t){alert(t)},doAsync:!1}):$.unblockUI()))}),ZonePopup=function(){function b(i){$("#divZoneMapCover").css("display","block"),$("#divZonePopup").show(),h=null,n=i,n===null?($("#divFindAddress").show(),$("#divAZZoneDetails").hide(),n=new Zone(null,"New Zone",1,3,null,0,null,null,!1),r(),$("#btnDelete").hide(),$("#btnSave").hide(),$("#txtZoneDetailsHeading").text("Create New Zone"),$("#aGeocode").text("Address Look-up")):(h=new Zone(n,n.Geometry),$("#btnDelete").show(),$("#btnSave").show(),$("#txtZoneDetailsHeading").text(n.Name),$("#aGeocode").text("Location Look-up"),$("#divFindAddress").hide(),$("#divAZZoneDetails").show()),nt(),t==null?WaitLoaded(k):l()}function k(){d("divZoneMap"),l()}function l(){google.maps.event.trigger(t,"resize"),n.Id!=null?tt():t!=null&&t.setOptions({zoom:2,center:new google.maps.LatLng(0,0)})}function d(n){var i=new google.maps.LatLng(0,0),r={zoom:2,center:i,mapTypeId:google.maps.MapTypeId.ROADMAP};t=new google.maps.Map(document.getElementById(n),r),o!=null&o!=undefined&&google.maps.event.removeListener(o),g(t)}function g(n){google.maps.event.addListenerOnce(n,"tilesloaded",function(){$("#divZoneMapCover").css("display","none"),google.maps.event.addListener(n,"idle",function(){$("#divZoneMapCover").css("display","none")})})}function nt(){n.ZoneType==1?(r(n.PointRadiusMeters),$("#txtInfo").text(s),$("[name=zoneType]").filter("[value='1']").prop("checked",!0)):(r(),$("#txtInfo").text(c),$("[name=zoneType]").filter("[value='2']").prop("checked",!0));var t=$("#imgDesignationZone")[0];n.Designation==1||n.Designation==3?(t.src=URL.PRIVATE,t.alt=3,$(t).next().text("Private")):(n.Designation==2||n.Designation==4)&&(t.src=URL.BUSINESS,t.alt=4,$(t).next().text("Business")),$("#txtZoneName").val(n.Name),$("#txtComment").val(n.Comment),UserMappingSettings.AllowTrackingZones===!0&&($("#chkTrackingZone")[0].checked=n.IsTrackingZone),UserMappingSettings.AllowTripCategorization&&$("#trZoneCategory").length>0&&(n.CategoryId==null||n.CategoryId==0?($("#spZoneCategory").empty().text("None"),$("#divZoneCategory div.cat").addClass("catEmpty").empty()):($("#spZoneCategory").empty().text(GetCategoryText(n.CategoryId)),$("#divZoneCategory div.cat").removeClass("catEmpty").empty(),$("#divZoneCategory div.cat").append(GetCategoryDiv(n.CategoryId,!1)))),$("#pDrawCustomZone").hide()}function tt(){if(n.Geometry!=null&&n.Points!=null&&typeof n.Points!="undefined"){v(n);return}var t=IntArrayToJSONString("ids",[n.Id]);DoAjax({url:"/MappingWebService.asmx/GetZonesById",data:t,successCallback:function(t){n.Points=t.d[0].Points,v(n)},errorCallback:function(n,t){alert(t)}})}function it(t){var u,s,h,r,i;if(t.d.length==1&&t.d[0]===!1){alert(InvalidShapeMsg);return}var e=t.d[0],c=t.d[1],o=t.d[2];if(e===0){if(u=!1,confirmUI("Zone not saved!\nDo you want to try again?",!0,function(n){return u=n,!0}),u===!0)return;f()}n.Id==-1?(n.Id=e,s=g_Zones.length,g_Zones.UpdateZone(n),h=s%2==0,$("#tableZones").append(n.ToTableString(h)),$("#trNoResultsFound").hide()):(g_Zones.UpdateZone(n,!0),r=$("#thCategory").length,i=0,$("#"+n.Id+" > td").each(function(){if(r==1&&i===0)$(this).children("div.cat").data("c",n.CategoryId).empty().append(GetCategoryDiv(n.CategoryId,!1));else if(i===r+0)$(this).text(n.Name);else if(i==r+1)n.Designation==2||n.Designation==4?$("#Designation"+n.Id).attr({src:URL.BUSINESS,title:"Business. Click to change to Private"}):(n.Designation==1||n.Designation==3)&&$("#Designation"+n.Id).attr({src:URL.PRIVATE,title:"Private. Click to change to Business"});else if(i==r+2)n.Comment!=null?$(this).text(n.Comment):$(this).text("");else return!1;i++})),o!=null&&pCategoryPopup!=null&&pCategoryPopup.setDatasource(o[1]),f()}function a(t){var i=t==null?undefined:$(t).data("id"),r;return i==-99?(setTimeout(function(){EditCategories()},100),!1):i!=undefined&&i!=0?($(t).children("div").toggleClass("checked"),!1):(i==undefined&&(i=0,$("table.categoryPopupTable tr").each(function(n,t){var r=$(t);r.children("td").children("div").hasClass("checked")===!0&&(i+=parseInt(r.children("td").data("id")))})),n.CategoryId=i,r=$("#divZoneCategory div.cat"),n.CategoryId==0?(r.addClass("catEmpty").css("background-color","white").data("c",i),r.children("div[class^=cat]").remove(),$("#spZoneCategory").empty().text("None")):(r.removeClass("catEmpty"),r.children("div[class^cat]").remove(),r.append(GetCategoryDiv(i,!1)),$("#spZoneCategory").empty().text(GetCategoryText(i))),!0)}function f(){if(t!=null){var n=t.getStreetView();n!=undefined&&n.getVisible()==!0&&n.setVisible(!1)}try{SizableCircle.RemoveCircle(),SizablePolygon.RemovePolygon()}catch(i){}$("#divZonePopup").hide(),g_fPopupOpen=!1,$("[name=zoneType]").filter("[value='1']").prop("checked",!1),$("[name=zoneType]").filter("[value='2']").prop("checked",!1),$("#spZoneCategory").empty().text("None"),$("#divZoneCategory div.cat").addClass("catEmpty").empty()}function v(n){var i,r;n.ZoneType==1?(r=new google.maps.LatLng(n.Points[0][1],n.Points[0][0]),SizableCircle.InitializeCircle(r,n.PointRadiusMeters,t),t.fitBounds(SizableCircle.GetBounds()),i=GoogleMapExtensions.GetZoomLevel(SizableCircle.GetBounds(),$("#divZoneMap").width()),t.setZoom(i)):n.ZoneType==2&&(SizablePolygon.InitializePolygon(n,t),t.fitBounds(SizablePolygon.GetBounds()),i=GoogleMapExtensions.GetZoomLevel(SizablePolygon.GetBounds(),$("#divZoneMap").width()),t.setZoom(i))}function rt(n,t){$("#txtRadius").text(Format.DistanceSmall(t.value)),SizableCircle.radiusChanged(t.value)}function ut(n){$("#txtRadius").text(Format.DistanceSmall(n))}function ft(){i!=null&&typeof i!="undefined"&&google.maps.event.removeListener(i),n.Points=SizablePolygon.GetPolygonPoints(),SizablePolygon.RemovePolygon(),SizablePolygon.InitializePolygon(n,t),$("#txtInfo").text(c),$("#aDrawNewShape").show(),$("#aDrawNewCircle").show(),t.setOptions({draggableCursor:"hand"})}function y(n,f){var e=new google.maps.Geocoder;e.geocode(n,function(e,o){var c,h;if(o==google.maps.GeocoderStatus.OK)n.location!=undefined?$("#txtComment").val(e[0].formatted_address):(c=e[0].geometry,c.bounds!=undefined?t.fitBounds(c.bounds):t.setOptions({center:c.location,zoom:14}),t.getZoom()<14&&t.setZoom(14),SizableCircle.RemoveCircle(),SizableCircle.InitializeCircle(c.location,u,t),r(u),$("#txtInfo").text(s),$("#aDrawNewCircle").hide(),i!=null&&typeof i!="undefined"&&(google.maps.event.removeListener(i),t.setOptions({draggableCursor:"hand"})),f!=undefined&&typeof f=="function"&&f(e[0].formatted_address));else{switch(o){case"ERROR":h="There was a problem contacting the Google servers. Please try again later.";break;case"INVALID_REQUEST":h="The request was invallid. Please re-type the address and try again.";break;case"OVER_QUERY_LIMIT":h="Your request cannot be processed now. Please try again later.";break;case"REQUEST_DENIED":h="Your request cannot be processed now. Please try again later.";break;case"UNKNOWN_ERROR":h="Your request could not be processed due to an external server error. Please try again later.";break;case"ZERO_RESULTS":h="No results could be found for this address. Please re-type the address and try again."}alert(h),SizableCircle.RemoveCircle()}})}function e(u){i!=null&&typeof i!="undefined"&&google.maps.event.removeListener(i),SizablePolygon.RemovePolygon(),SizableCircle.RemoveCircle(),i=google.maps.event.addListener(t,"click",et),r(),t.setOptions({draggableCursor:"crosshair"}),u==2?(n.ZoneType=2,$("#txtInfo").text(w)):u==1&&(n.ZoneType=1,$("#txtInfo").text(p))}function et(f){typeof f!="undefined"&&(typeof f.latLng!="undefined"&&(f=f.latLng),n.ZoneType==1?(i!=null&&typeof i!="undefined"&&google.maps.event.removeListener(i),SizableCircle.InitializeCircle(f,u,t),$("#txtInfo").text(s),r(u),t.setOptions({draggableCursor:"hand"})):SizablePolygon.DrawNewPolygon(null,f,t))}function r(n){arguments==undefined||arguments.length==0?($("#radius").hide(),$("#sliderScale").hide(),$("#trSlider").hide()):($("#txtRadius").text(Format.DistanceSmall(n)),$("#radius").show(),$("#slider").slider("option",{value:n}),$("#trSlider").show(),$("#sliderScale").show())}var t,n,i,o,s="Drag the pin to position the zone.",c="Drag the pins to change the zone's shape.",p="Click on the map to place the center of a new circular zone.",w="Click the outline of the shape on the map. To close the shape, click on the pin.",u=50,h;return $("#btnSave").click(function(t){var f,r,u;if(t.preventDefault(),pCategoryPopup!=undefined&&pCategoryPopup.isOpen()){pCategoryPopup.onClose(function(){$("#btnSave").click()});return}if(f=n.ZoneType,r=$("#txtZoneName").val(),r==""){alert("Please enter a name");return}var s=$("#txtComment").val(),h=n.Designation,o=0,i=[];if(f==1){if(o=SizableCircle.GetRadius(),i[0]=SizableCircle.GetCircleCenter(),i[0]==null){alert("Please click on the map to create your zone");return}}else{if(i=SizablePolygon.GetPolygonPoints(),i==null){alert("Please click on the map to draw a shape on the map.");return}if(i.length<4){alert("Invalid shape! A shape must have 4 or more points. \nPlease redraw the shape."),e(2);return}if(SizablePolygon.IsClosed()===!1){alert("Please click on the pin to close the shape!");return}}n==-1||n.Id==null?(u=UserMappingSettings.AllowTrackingZones==!0?$("#chkTrackingZone").prop("checked"):!1,n=new Zone(-1,r,f,h,i,o,null,s,u)):(u=UserMappingSettings.AllowTrackingZones==!0?$("#chkTrackingZone").prop("checked"):n.IsTrackingZone,nameChanged=r!=n.Name,n=new Zone(n.Id,r,f,h,i,o,n.Geometry,s,u,n.CategoryId)),n.Save(it,SaveErrorCallback1)}),$("#btnDelete").click(function(t){t.preventDefault(),confirmUI("Delete this zone?",!0,function(t){if(t==!0){var i=n.JSONId("zoneId");DoAjax({url:"/MappingWebService.asmx/DeleteZoneById",data:i,dataType:"json",successCallback:function(t){if(t.d==-1){alert("There was an error in the webservice and the zone was not deleted.");return}if(g_Zones.GetZone(n.Id)!=null){var i=!1;$("#tableZones tr").each(function(t,r){r.id==n.Id&&i===!1&&(i=!0),i===!0&&r.id!=""&&(r.className=r.className=="even"?"odd":"even")}),$("#"+n.Id).remove(),g_Zones.Delete(n.Id)}n=-1,f()},errorCallback:function(n,t){alert(t)}})}return!0})}),$("#apClose").click(function(t){t.preventDefault(),$.extend(n,h),f()}),$("#btnFindAddress").click(function(n){n.preventDefault();var t=$("#txtFindAddress").val();if(t==undefined||t.length==0){alert('Please enter an address or click "Continue" to look for the address on the map.');return}y({address:t},function(n){$("#txtComment").val(n),$("#divFindAddress").hide(),$("#divAZZoneDetails").show(),$("#btnSave").show()})}),$("#btnSkipAddress").click(function(){e(1),$("#divFindAddress").hide(),$("#divAZZoneDetails").show(),$("#btnSave").show(),n.Id=null}),$("#aGeocode").click(function(t){var r,u,i;if(t.preventDefault(),n.Id!=null)longitude=n.Points[0][0],latitude=n.Points[0][1],u=new google.maps.LatLng(latitude,longitude),r={location:u};else{if(i=$("#txtComment").val(),i==undefined||i.length==0)return;r={address:i}}y(r)}),$("#irNewShape").click(function(){e(2)}),$("#irNewCircle").click(function(){e(1)}),$("#aDesignation").click(function(t){t.preventDefault();for(var r=this,i=r.firstChild;i.nodeName!="IMG";)i=i.nextSibling;n.Designation==1||n.Designation==3?($(i).next().text("Business"),i.src=URL.BUSINESS,i.alt="4",n.Designation=4):(n.Designation==2||n.Designation==4)&&($(i).next().text("Private"),i.src=URL.PRIVATE,i.alt="3",n.Designation=3)}),$("#spZoneCategory").click(function(t){t.preventDefault(),t.stopPropagation(),UserMappingSettings.AllowTripCategorization&&pCategoryPopup.show($("#divZoneCategory")[0],{selected:(n.CategoryId==null?0:n.CategoryId).toString(2),callback:a},t)}),$("#divZoneCategory").click(function(t){$(t.target.parentNode).data("id")==undefined&&(t.preventDefault(),t.stopPropagation(),pCategoryPopup.show(this,{selected:(n.CategoryId==null?0:n.CategoryId).toString(2),callback:a},t))}),{LoadDiv:b,SetRadius:ut,slider_slide:rt,RemoveListener:ft}}()